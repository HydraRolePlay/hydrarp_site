{% extends 'base.html' %}

{% block content %}
<style>
ul {
    list-style-type: none;
    margin-block-start: 0;
    margin-block-end: 0;
    margin-inline-start: 0;
    margin-inline-end: 0;
    padding-inline-start: 0;
}
.blocked-btn {
    pointer-events:none;
    box-shadow: inset rgba(100, 100, 100, 0.85);
    opacity: 0.6;
}
.input-file{
    width:.1px;
    height:.1px;
    opacity:0;
    overflow:hidden;
    position:absolute;
    z-index:-1
}
.user-avatar-pic{
    width: 144px;
    height: 144px;
    border-radius: 25%;
    object-fit: cover;
}
.reb_block__label{
    padding-left: 16px;
    margin-top: 24px;
    font-weight: bold;
    margin-bottom: 8px;
}

</style>
<main class="main-content" style="margin-top: 80px;">
    <section class="settings" style="display: none;">
        <div class="container">
            <div class="user-col" style="padding-top: 80px;">
                <h1 class="user-name" style="font-family: Montserrat;font-style: normal;font-weight: bold;font-size: 48px;line-height: 56px;color: #666666;">{{current_user.login}}</h1>
                <p class="user-date" style="font-family: Montserrat;font-style: normal;font-weight: normal;font-size: 16px;line-height: 24px;color: #666666;">Зарегистрирован(а) с <time class="date">{{current_user.date_of_reg}}</time></p>
            </div>
            <ul class="breadcrumbs" style="padding-top: 48px;">
                <li><a href="" id="return-from-settings-btn">Личный кабинет</a></li>
            </ul>
            <h2 class="title">Настройки</h2>
            <div class="user-info-edit">
                <h2 class="title-another" style="padding-top:8px;margin-bottom: 24px;">Фото профиля</h2>
                <div class="user-info user-settings-info" style="margin-top: 0px;">
                    <div class="user-avatar">
                        <label for="file" class="btn-tertiary js-labelFile" style="width: 144px;height: 144px;">
                            <img src="{{img}}{{image}}" alt="avatar"  class="user-avatar-pic hover-label">
                        </label>
                        <input id="file" type="file" accept="image/jpeg,image/png,image/gif" style="display: none;"/>
                    </div>
                    <div class="user-col" style="display: flex;flex-direction: column;">
                        <h1 class="usr-ava-inner">Перетащите сюда фотографию или нажмите на свою аватарку<p class="usr-ava-detail" style="color: #666;">JPEG, PNG, GIF до 5 Мб</p></h1>

                        <a class="btn settings-btn">
                            ПОДТВЕРДИТЬ
                        </a>
                    </div>
                </div>
                <h2 class="title-another" style="padding-top:48px;margin-bottom: 0px;">Личные данные</h2>
                <div class="user-l-data">
                    <div class="user-l-data-input-row">
                        <p class="reb_block__label" >E-mail</p>
                        <div class="user-l-data-handle">
                            <input name="email" type="text" class="reg_block__input" placeholder="Введите эл. почту">
                            <a class="btn correct-btn">изменить</a>
                        </div>
                    </div>
                    <div class="user-l-data-input-row">
                        <p class="reb_block__label" >Логин</p>
                        <div class="user-l-data-handle">
                            <input name="login" type="text" class="reg_block__input" placeholder="Придумайте логин">
                            <a class="btn correct-btn">изменить</a>
                        </div>
                    </div>
                </div>
            </div>
            <h2 class="title-another" style="padding-top:32px;">Активный план</h2>
            <div class="choose-wrapper slider" style="padding-top: 24px;padding-bottom: 80px;width: 100%;">
                <div class="choose-item">
                    <h3 class="choose-title">Стандарт</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">250 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 10%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 10%</p>
                        </li>
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">200 <span class="ruble">&#8381;</span></p>
                    <a href="#" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check">
                                <svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>
                        Оформить
                    </a>
                </div>
                <div class="choose-item choose-item-purple">
                    <h3 class="choose-title">Премиум</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">500 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 15%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 25%</p>
                        </li>
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">400 <span class="ruble">&#8381;</span></p>
                    <a href="#" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check"><svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>
                        Оформить
                    </a>
                </div>
                <div class="choose-item choose-item-gradient">
                    <h3 class="choose-title">Вип</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">900 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 20%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 30%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Кэшбек</p>
                            <p class="advantage-desc">+ 1%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Снижение налога</p>
                            <p class="advantage-desc">+ 10%</p>
                        </li>
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">750 <span class="ruble">&#8381;</span></p>
                    <a href="#" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check"><svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>
                        Оформить
                    </a>
                </div>
                <div class="choose-item choose-item-gradient">
                    <h3 class="choose-title">Вип+</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">1 200 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 25%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 40%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Кэшбек</p>
                            <p class="advantage-desc">+ 5%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Снижение налога</p>
                            <p class="advantage-desc">+ 15%</p>
                        </li>
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">1000 <span class="ruble">&#8381;</span></p>
                    <a href="" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check"><svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>
                        Оформить
                    </a>
                </div>
            </div>
            <div class="usr-settings"></div>
        </div>
    </section>
    <section class="user">
        <div class="container">
            <div class="user-info">
                <div class="user-avatar">
                    <img src="{{img}}{{image}}" alt="avatar" class="user-avatar-pic">
                </div>
                <div class="user-col">
                    <h1 class="user-name">{{current_user.login}}</h1>
                    <p class="user-date">Зарегистрирован(а) с <time class="date">{{current_user.date_of_reg}}</time></p>
                    <a class="user-config btn btn-white" style="text-align: right;">
                        <svg class="user-config-icon" width="16" height="24" viewBox="0 0 16 24" preserveAspectRatio="none" style="top: 11.5px; left: 17px;">
                            <use xlink:href="#icon-config"><svg id="icon-config"><path d="M14.125 7.406l1-.562A.74.74 0 0015.469 6c-.344-1.313-1.063-2.5-2-3.469-.25-.219-.625-.281-.906-.125l-1 .594a5.542 5.542 0 00-1.032-.594V1.25c0-.313-.25-.656-.562-.719A7.766 7.766 0 006 .531a.733.733 0 00-.563.719v1.156A5.545 5.545 0 004.407 3l-1-.594c-.282-.156-.657-.094-.907.125C1.562 3.5.844 4.687.5 6a.74.74 0 00.344.844l1 .562c-.032.188-.032.438-.032.594 0 .188 0 .438.032.594l-1 .594a.74.74 0 00-.344.843c.344 1.313 1.063 2.5 2 3.469.25.219.625.281.906.125l1-.594c.25.188.719.469 1.032.594v1.156c0 .313.25.656.562.719a7.765 7.765 0 003.969 0 .733.733 0 00.562-.719v-1.156a5.54 5.54 0 001.031-.594l1 .594c.282.156.657.094.907-.125.937-.969 1.656-2.156 2-3.469a.74.74 0 00-.344-.844l-1-.593a7.518 7.518 0 000-1.188zm-1.656 2l1.375.781c-.188.563-.688 1.376-1.063 1.813l-1.375-.781c-1 .844-1.125.937-2.375 1.375v1.594c-.281.03-.75.093-1.031.093-.313 0-.781-.062-1.063-.094v-1.593c-1.25-.438-1.406-.531-2.375-1.375L3.188 12c-.374-.438-.874-1.25-1.062-1.813l1.375-.78c-.25-1.313-.25-1.47 0-2.782l-1.375-.781c.25-.657.594-1.282 1.063-1.813l1.374.782c1-.844 1.125-.938 2.375-1.375V1.843c.282-.032.75-.094 1.063-.094.281 0 .75.063 1.031.094v1.593c1.25.438 1.406.532 2.375 1.376l1.375-.782c.375.438.875 1.25 1.063 1.813l-1.375.781c.25 1.313.25 1.469 0 2.781zM8 5C6.344 5 5 6.375 5 8a3 3 0 003 3c1.625 0 3-1.344 3-3 0-1.625-1.375-3-3-3zm0 4.5A1.48 1.48 0 016.5 8 1.5 1.5 0 018 6.5c.813 0 1.5.688 1.5 1.5A1.5 1.5 0 018 9.5z" fill="#fff"></path></svg></use>
                        </svg>  
                        Настройки
                    </a>
                    <a href="/logout" class="user-exit btn btn-white">Выйти</a>
                </div>
            </div>
            <div class="big-logo"></div>
        </div>
    </section>
    <section class="personages">
        <div class="container">
            <div class='newtitle'>
                <h2 class="title" style="margin: 0;">Персонажи</h2>
                <div style="display: flex; flex-direction: column; justify-content: space-between; align-items: center;">
                    <h3 style="display: flex; flex-direction: row; justify-content: center; align-items: center; font-family: 'Montserrat'; font-weight: 300; margin-top: 0; margin-bottom: 10px;">
                        Ваш баланс: <span style="margin-left: 5px; margin-right: 1px;">{{current_user.balance}}</span><img src="{{img}}icon-ruble-backg.svg" style="margin-left: 4px;" alt="ruble">
                    </h3>
                    <div class="btn donate">
                        <svg style='position: absolute; top: 17px; left: 24px;' class="user-balance-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-wallet"><svg id="icon-wallet"><path d="M17.5 3.875V3.25c0-1.367-1.133-2.5-2.5-2.5H3.75C1.64.75 0 2.43 0 4.5v10c0 2.11 1.64 3.75 3.75 3.75H17.5c1.367 0 2.5-1.094 2.5-2.5V6.375c0-1.367-1.133-2.5-2.5-2.5zm.625 11.875a.642.642 0 01-.625.625H3.75A1.851 1.851 0 011.875 14.5v-10c0-1.016.82-1.875 1.875-1.875H15c.313 0 .625.313.625.625V4.5H4.375a.642.642 0 00-.625.625c0 .352.273.625.625.625H17.5c.313 0 .625.313.625.625v9.375zM15 9.5c-.703 0-1.25.586-1.25 1.25 0 .703.547 1.25 1.25 1.25.664 0 1.25-.547 1.25-1.25 0-.664-.586-1.25-1.25-1.25z" fill="#fff"></path></svg></use>
                        </svg>  
                        Пополнить
                    </div>
                </div>
            </div>
            <div class="personages-wrapper">
            {% if players|count != 0 %}
                {% for i in players %}
                    {% if i.ban != '0' %}
                    <div class="person person-banned">
                    {% else %}
                    <div class="person">
                    {% endif %}
                        <div class="person-header">
                            <h3 class="person-nickname">
                            {% for j in i.nickname.split() %}
                            {{j}}
                            <br>
                            {% endfor %}
                            </h3>
                            <p class="person-level">Уровень <br><span class="level">{{i.level}}</span></p>
                        </div>
                        <table class="person-info">
                            <tr>
                                <td>Статус</td>
                                {% if i.ban != '0' %}
                                <td style="color: red;">Забанен</td>
                                {% else %}
                                <td style="color: lightgreen;">Активен</td>
                                {% endif %}
                            </tr>
                            <tr>
                                <td>Прогресс уровня</td>
                                <td>{{i.Experience}}</td>
                            </tr>
                            <tr>
                                <td>Фракция</td>
                                <td>{{i.faction}}</td>
                            </tr>               
                            <tr>
                                <td>Баланс на руках</td>
                                <td>{{i.cash}} $</td>
                            </tr>
                            <tr>
                                <td>Баланс в банке</td>
                                <td>{{i.card}} $</td>
                            </tr>       
                        </table>
                        <p class="balance-title">Пополнить баланс</p>
                        <form class="balance-form {% if i.ban != '0' %}blocked-btn{% endif %}">
                            <input type="hidden" class="pers-nickname" value="{{i.nickname}}">
                            <div class="balance-wrapper">
                                <input class="balance-input" type="text" placeholder="10 000 000 $">
                                <div class="count-wrapper">
                                    <span class="balance-count" style="overflow:hidden; max-width: 90px;">100 000</span>
                                    <span class="balance-sign"><img src="{{img}}icon-ruble-backg.svg" alt="ruble"></span>
                                </div>
                            </div>
                            <div type="submit" class="btn swap">
                                <svg class="user-balance-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                                    <use xlink:href="#icon-wallet"><svg id="icon-wallet"><path d="M17.5 3.875V3.25c0-1.367-1.133-2.5-2.5-2.5H3.75C1.64.75 0 2.43 0 4.5v10c0 2.11 1.64 3.75 3.75 3.75H17.5c1.367 0 2.5-1.094 2.5-2.5V6.375c0-1.367-1.133-2.5-2.5-2.5zm.625 11.875a.642.642 0 01-.625.625H3.75A1.851 1.851 0 011.875 14.5v-10c0-1.016.82-1.875 1.875-1.875H15c.313 0 .625.313.625.625V4.5H4.375a.642.642 0 00-.625.625c0 .352.273.625.625.625H17.5c.313 0 .625.313.625.625v9.375zM15 9.5c-.703 0-1.25.586-1.25 1.25 0 .703.547 1.25 1.25 1.25.664 0 1.25-.547 1.25-1.25 0-.664-.586-1.25-1.25-1.25z" fill="#fff"></path></svg></use>
                                </svg>  
                                Пополнить
                            </div>
                        </form>
                        {% if i.ban != '0' %}
                        <a href="#" class="person-unban blocked-btn">
                            <svg class="person-unban-icon" width="16" height="24" viewBox="0 0 16 24" preserveAspectRatio="none">
                                <use xlink:href="#icon-unban"><svg id="icon-unban"><path d="M.375.25A.38.38 0 000 .625v6A.36.36 0 00.375 7h6a.38.38 0 00.375-.375v-.844c0-.218-.188-.375-.406-.375L2.406 5.5C3.375 3.375 5.5 1.875 8 1.875A6.135 6.135 0 0114.125 8 6.115 6.115 0 018 14.125c-1.594 0-3-.563-4.094-1.531-.156-.125-.375-.125-.5 0l-.625.625a.396.396 0 000 .562A7.872 7.872 0 008 15.75c4.25 0 7.719-3.438 7.75-7.719 0-4.25-3.469-7.75-7.75-7.75A7.642 7.642 0 001.531 3.72L1.594.656c0-.219-.157-.406-.375-.406H.375z" fill="#0EAD00"></path></svg></use>
                            </svg>                              
                            Разбанить персонажа
                        </a>
                        {% endif %}
                        <a href="" class="person-delete">
                            <svg class="person-delete-icon" width="16" height="24" viewBox="0 0 16 24" preserveAspectRatio="none">
                                <use xlink:href="#icon-delete"><svg id="icon-delete"><path d="M8.375 13h.75a.38.38 0 00.375-.375v-6.75a.403.403 0 00-.375-.375h-.75A.38.38 0 008 5.875v6.75a.36.36 0 00.375.375zM13.5 2.5h-2.594L9.844.75C9.594.344 9.03 0 8.563 0H5.405c-.468 0-1.031.344-1.281.75L3.062 2.5H.5c-.281 0-.5.25-.5.5v.5c0 .281.219.5.5.5H1v10.5c0 .844.656 1.5 1.5 1.5h9a1.5 1.5 0 001.5-1.5V4h.5c.25 0 .5-.219.5-.5V3c0-.25-.25-.5-.5-.5zm-8.156-.906c.031-.032.125-.094.156-.094h2.969c.031 0 .125.063.156.094l.531.906H4.812l.532-.906zM11.5 14.5h-9V4h9v10.5zM4.875 13h.75A.38.38 0 006 12.625v-6.75a.403.403 0 00-.375-.375h-.75a.38.38 0 00-.375.375v6.75a.36.36 0 00.375.375z" fill="#EF0000"></path></svg></use>
                            </svg>                          
                            Удалить персонажа
                        </a>
                    </div>
                {% endfor %}
            {% else %}
                <div style="min-height: 500px;">
                    Создайте персонажей у нас на сервере hydrarp.ru:22005
                </div>
            {% endif %}
            </div>              
        </div>
    </section>
    <section class="sub">
        <div class="container">
            <h2 class="title">VIP подписка для настоящей элиты</h2>
            <ul class="sub-list">
                <li class="list-cashback">      
                    <svg class="list-monthly-icon" width="25" height="24" viewBox="0 0 25 24" preserveAspectRatio="none" fill="url(#paint0_linear)">
                        <use xlink:href="#icon-vip-dollar">
                            <svg id="icon-vip-dollar"><path d="M12.5 5.79c-1.758 0-3.125 1.679-3.125 3.75 0 2.108 1.367 3.788 3.125 3.788 1.719 0 3.125-1.68 3.125-3.789 0-2.07-1.406-3.75-3.125-3.75zm11.758-4.142a11.903 11.903 0 00-4.57-.898c-4.805 0-9.61 2.46-14.415 2.46-1.21 0-2.421-.155-3.632-.546a1.388 1.388 0 00-.391-.078c-.664 0-1.25.547-1.25 1.25v12.422c0 .469.273.937.703 1.133 1.524.625 3.047.859 4.57.859 4.805 0 9.61-2.422 14.415-2.422 1.21 0 2.421.156 3.632.547.117.04.274.04.39.04.665 0 1.29-.509 1.29-1.212V2.781c0-.469-.313-.937-.742-1.133zm-1.133 10.47a2.497 2.497 0 00-2.148 1.913c-.43-.039-.82-.078-1.29-.078-2.617 0-5.195.664-7.656 1.29-2.383.585-4.61 1.132-6.758 1.132h-.937a2.467 2.467 0 00-2.461-2.422V7.04c1.21 0 2.188-.86 2.422-2.031.312.039.625.078.976.078 2.618 0 5.196-.664 7.657-1.29 2.383-.585 4.61-1.171 6.758-1.171.43 0 .82.04 1.25.078a2.516 2.516 0 002.187 2.422v6.992z"></path></svg>
                        </use>
                    </svg>                                                  
                    Увеличенный кэшбэк
                </li>
                <li class="list-percent">
                    <svg class="list-monthly-icon" width="25" height="24" viewBox="0 0 25 24" preserveAspectRatio="none" fill="url(#paint0_linear)">
                        <use xlink:href="#icon-vip-check">
                            <svg id="icon-vip-check"><path d="M18.945 15.5h1.68a.642.642 0 00.625-.625v-1.64c0-.274-.195-.665-.39-.9l-9.024-9.023-2.813 2.813 9.024 9.023c.234.196.625.352.898.352zM8.125 5.227l2.813-2.813L9.296.774a1.235 1.235 0 00-.664-.235c-.195 0-.508.117-.664.234L6.523 2.258a1.108 1.108 0 00-.273.664c0 .234.117.508.273.664l1.602 1.64zM5.312 17.062h.625a.308.308 0 00.313-.312v-.625c.898 0 1.64-.781 1.64-1.758 0-.781-.507-1.484-1.21-1.68l-1.758-.546c-.234-.04-.352-.235-.352-.47 0-.312.196-.546.47-.546h1.093c.156.04.351.078.508.156.039.04.117.078.156.078.078 0 .156-.039.234-.117l.43-.43c.078-.039.117-.156.117-.234 0-.078-.039-.195-.117-.234-.313-.235-.86-.43-1.211-.43V9.25a.336.336 0 00-.313-.313h-.625A.308.308 0 005 9.25v.664c-.938 0-1.68.781-1.68 1.758 0 .781.508 1.445 1.211 1.68l1.758.546c.234.04.352.235.352.47 0 .312-.196.507-.47.507H5.079a.943.943 0 01-.469-.117.632.632 0 00-.195-.078c-.078 0-.156.039-.234.117l-.43.43c-.078.039-.117.156-.117.234 0 .078.039.195.117.234.313.235.86.43 1.25.43v.625c0 .195.117.313.313.313zM10 12.375h3.555L11.68 10.5H10a.642.642 0 00-.625.625v.625c0 .352.273.625.625.625zm-.625 2.5c0 .352.273.625.625.625h6.68l-1.875-1.875H10a.642.642 0 00-.625.625v.625zM23.75 5.5h-7.93l1.875 1.875h5.43v11.25H1.875V7.375h6.68l-.43-.39-.86-.86L6.68 5.5H1.25C.547 5.5 0 6.086 0 6.75v12.5c0 .703.547 1.25 1.25 1.25h22.5c.664 0 1.25-.547 1.25-1.25V6.75c0-.664-.586-1.25-1.25-1.25z"></path></svg>
                        </use>
                    </svg>                              
                    Процентное увелечение заработка
                </li>
                <li class="list-monthly">
                    <svg class="list-monthly-icon" width="25" height="24" viewBox="0 0 25 24" preserveAspectRatio="none" fill="url(#paint0_linear)">
                        <use xlink:href="#icon-vip-cash">
                            <svg id="icon-vip-cash"><path d="M13.734 5.031l2.149-3.164c.039-.117.078-.273.078-.43 0-.507-.39-.898-.899-.937H6.899a.95.95 0 00-.937.938c0 .156.078.312.117.43L8.266 5.03C.609 9.72 1 15.851 1 16.594 1 18.78 2.914 20.5 5.258 20.5h11.445c2.344 0 4.258-1.719 4.258-3.906 0-.742.352-6.914-7.227-11.563zm-.468-2.656L11.78 4.563h-1.6L8.695 2.374h4.57zm5.82 14.219c0 1.133-1.055 2.031-2.383 2.031H5.258c-1.328 0-2.383-.898-2.383-2.031-.04-3.164 1.25-6.836 6.68-10.157h2.89c5.352 3.32 6.68 6.993 6.64 10.157zm-6.953-3.946l-1.914-.546c-.235-.079-.352-.313-.352-.547 0-.313.195-.547.469-.547h1.21c.157 0 .392.078.548.156.039.04.117.04.195.04a.554.554 0 00.234-.079l.508-.469a.54.54 0 00.078-.234c0-.117-.039-.235-.117-.274-.312-.234-.937-.468-1.328-.468v-.703a.35.35 0 00-.351-.352h-.665a.35.35 0 00-.351.352v.703c-1.016 0-1.797.86-1.797 1.875 0 .86.547 1.601 1.328 1.836l1.914.546c.235.079.352.313.352.547 0 .313-.196.547-.469.547h-1.21c-.157 0-.392-.078-.548-.156-.039-.04-.117-.04-.195-.04a.419.419 0 00-.235.08l-.507.468a.555.555 0 00-.078.234c0 .117.039.235.117.274.312.234.937.468 1.328.468v.703c0 .196.156.313.351.313h.665c.195 0 .351-.117.351-.313v-.703c1.016 0 1.797-.859 1.797-1.875.039-.859-.547-1.601-1.328-1.836z"></path></svg>
                        </use>
                    </svg>                              
                    Ежемесячные выплаты
                </li>
                <li class="list-extra">
                    <svg class="list-monthly-icon" width="25" height="24" viewBox="0 0 25 24" preserveAspectRatio="none" fill="url(#paint0_linear)">
                        <use xlink:href="#icon-vip-diamond"><svg id="icon-vip-diamond"><path d="M18.875.5H5.125a.43.43 0 00-.39.234L.827 6.477a.47.47 0 000 .546l10.781 13.32a.48.48 0 00.743 0l10.78-13.32a.55.55 0 00.04-.546L19.266.734C19.148.578 19.03.5 18.875.5zm-.781 1.875l2.5 3.75h-2.696l-2.03-3.75h2.226zm-7.89 0h3.554l2.031 3.75H8.211l1.992-3.75zm-4.337 0h2.227l-2.031 3.75H3.405l2.461-3.75zM4.187 8H6.18l2.695 6.25L4.187 8zm4.024 0h7.539L12 17.531 8.21 8zm6.914 6.25L17.781 8h1.992l-4.648 6.25z"></path></svg></use>
                    </svg>                              
                    Дополнительный опыт
                </li>
                <li class="list-drop">
                    <svg class="list-monthly-icon" width="25" height="24" viewBox="0 0 25 24" preserveAspectRatio="none" fill="url(#paint0_linear)">
                        <use xlink:href="#icon-vip-home">
                            <svg id="icon-vip-home"><path d="M22.516 9.188L20.25 7.312v-3.75a.336.336 0 00-.313-.312h-1.25c-.195.04-.312.156-.312.313v2.226l-5.508-4.531C12.555.984 11.93.789 11.5.789c-.469 0-1.094.195-1.406.469L.445 9.188a.72.72 0 00-.195.468c0 .117.04.313.117.39l.43.509c.078.117.312.195.469.195.117 0 .312-.04.39-.117l1.094-.899V17c0 .703.547 1.25 1.25 1.25h5c.664 0 1.21-.547 1.25-1.25v-4.063h2.5V17c0 .703.547 1.25 1.25 1.25h5c.664 0 1.21-.547 1.25-1.21V9.733l1.055.899a.694.694 0 00.39.156c.157 0 .39-.117.508-.234l.39-.508a.694.694 0 00.157-.39c0-.157-.117-.352-.234-.47zm-4.18 7.187h-3.711v-4.063a1.344 1.344 0 00-1.25-1.25h-3.75c-.703.04-1.25.586-1.25 1.25v4.063h-3.75V8.211L11.5 2.547l6.875 5.664-.04 8.164z"></path></svg>
                        </use>
                    </svg>                              
                    Снижение цены налогов
                </li>
            </ul>
            <a href="" class="btn" id="choose-sub-btn">
                <svg class="sub-choose-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                        <use xlink:href="#icon-price">
                            <svg id="icon-price"><path d="M13.438 11.75H4.062a.308.308 0 00-.312.313v1.25c0 .195.117.312.313.312h9.375a.308.308 0 00.312-.313v-1.25a.336.336 0 00-.313-.312zM15.624.734l-1.68 1.211L12.422.891a1.877 1.877 0 00-2.188 0L8.75 1.945 7.227.891C6.953.695 6.445.539 6.133.539c-.352 0-.82.156-1.094.352L3.516 1.945 1.836.735C1.055.187 0 .734 0 1.671v17.695c0 .899 1.055 1.485 1.836.938l1.68-1.25 1.523 1.093a1.877 1.877 0 002.188 0l1.523-1.093 1.484 1.093a1.877 1.877 0 002.188 0l1.523-1.093 1.68 1.25c.781.547 1.875 0 1.875-.938V1.672c0-.938-1.094-1.484-1.875-.938zm0 17.227l-1.68-1.211-2.617 1.875L8.71 16.75l-2.578 1.875-2.617-1.875-1.641 1.21V3.079l1.64 1.211 2.618-1.875L8.75 4.29l2.578-1.875 2.617 1.875 1.68-1.21v14.88zM13.437 7.375H4.063a.308.308 0 00-.313.313v1.25c0 .195.117.312.313.312h9.375a.308.308 0 00.312-.313v-1.25a.336.336 0 00-.313-.312z" fill="#fff"></path></svg>
                        </use>
                </svg>  
                Выбрать подписку
            </a>
        </div>
    </section>
    <section class="choose" style="display: none;">
        <div class="container">
            <ul class="breadcrumbs">
                <li><a href="" id="return-from-sub-btn">Личный кабинет</a></li>
            </ul>
            <h2 class="title">Выбери подписку</h2>
            <div class="choose-wrapper slider">
                <div class="choose-item">
                    <h3 class="choose-title">Стандарт</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">250 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 10%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 10%</p>
                        </li>                               
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">200 <span class="ruble">&#8381;</span></p>
                    <a href="#" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check">
                                <svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>                                  
                        Оформить
                    </a>
                </div>
                <div class="choose-item choose-item-purple">
                    <h3 class="choose-title">Премиум</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">500 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 15%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 25%</p>
                        </li>                               
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">400 <span class="ruble">&#8381;</span></p>
                    <a href="#" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check"><svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>                                  
                        Оформить
                    </a>
                </div>  
                <div class="choose-item choose-item-gradient">
                    <h3 class="choose-title">Вип</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">900 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 20%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 30%</p>
                        </li>   
                        <li class="choose-advantage">
                            <p class="advantage-title">Кэшбек</p>
                            <p class="advantage-desc">+ 1%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Снижение налога</p>
                            <p class="advantage-desc">+ 10%</p>
                        </li>                           
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">750 <span class="ruble">&#8381;</span></p>
                    <a href="#" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check"><svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>                                  
                        Оформить
                    </a>
                </div>
                <div class="choose-item choose-item-gradient">
                    <h3 class="choose-title">Вип+</h3>
                    <ul class="choose-advantages">
                        <li class="choose-advantage">
                            <p class="advantage-title">Ежемесячно</p>
                            <p class="advantage-desc">1 200 000 $</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Заработок</p>
                            <p class="advantage-desc">+ 25%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Доп. опыт</p>
                            <p class="advantage-desc">+ 40%</p>
                        </li>   
                        <li class="choose-advantage">
                            <p class="advantage-title">Кэшбек</p>
                            <p class="advantage-desc">+ 5%</p>
                        </li>
                        <li class="choose-advantage">
                            <p class="advantage-title">Снижение налога</p>
                            <p class="advantage-desc">+ 15%</p>
                        </li>                               
                    </ul>
                    <p class="choose-value">Стоимость</p>
                    <p class="choose-price">1000 <span class="ruble">&#8381;</span></p>
                    <a href="" class="btn choose-btn">
                        <svg style='margin-top: 4px;' class="choose-btn-icon" width="20" height="24" viewBox="0 0 20 24" preserveAspectRatio="none">
                            <use xlink:href="#icon-check"><svg id='icon-check'><path d="M15.9922 0.78125L5.71875 11.0547L1.96875 7.26562C1.77344 7.10938 1.46094 7.10938 1.30469 7.26562L0.171875 8.39844C0.015625 8.55469 0.015625 8.86719 0.171875 9.0625L5.40625 14.2578C5.60156 14.4531 5.875 14.4531 6.07031 14.2578L17.7891 2.53906C17.9453 2.38281 17.9453 2.07031 17.7891 1.875L16.6562 0.78125C16.5 0.585937 16.1875 0.585937 15.9922 0.78125Z" fill="white"/></svg></use>
                        </svg>                                  
                        Оформить
                    </a>
                </div>                                                                  
            </div>          
        </div>
    </section>
    <section class="contacts">
        <div class="container">
            <h2 class="title">Есть вопросы? Обращайтесь!</h2>
            <div class="contacts-wrapper">
                <p>У вас возникли проблемы в игре или хотите внести свои предложения в игровой процесс? Пишите нам и получите ответ в ближайшее время!</p>
                <form class="contacts-form">
                    <label class="contacts-mail">
                        E-mail для ответа
                        <input type="email" placeholder="E-mail">
                    </label>
                    <label class="contacts-message">
                        Сообщение для поддержки
                        <textarea name="" cols="30" rows="10" placeholder="Опишите свой вопрос"></textarea>
                    </label>
                </form>
            </div>
        </div>
    </section>
</main>
{% endblock %}

{% block modals %}
<div class="modal" id="choosing_modal">
    <div class="modal__body">
        <div class="modal__content" style="justify-content: start;">
            <span class="modal__close"></span>
            <div class="choosing_header">
                Выберите персонажа
            </div>
            <div class="block__msg hr"></div>
            {% if players|count == 0 %}
            <p>
                У Вас еще нет персонажей. Создайте их у нас на сервере!
            </p>
            {% else %}
            <div class="choosing_pers">
                {% for i in players %}
                <div class="pers"><div style="text-align: center; vertical-align: center; width: 100%; height: 90%">{{i.nickname}}</div></div>
                {% endfor %}
            </div>
            <div class="choosing_confirm" style="display: none;">
                <!--https://www.free-kassa.ru/merchant/cash.php-->
                <p style="text-align: center;">
                    Вы приобретаете подписку: <span class="span_vip" style="font-weight: bold; font-style: italic;">standart</span> <br>
                    Для Вашего персонажа - <span class="span_nickname" style="font-weight: bold; font-style: italic;"></span>
                </p>
                <p style="text-align: center;">
                    Сумма: <span class="choosing_value">200</span><span>&#8381;</span>
                </p>
                <form method='POST' action='/subscribe/pay_vip' id="choosing_form">
                    <input id="input_nickname" type="hidden" name='us_nickname' value="">
                    <input id="input_vip" type="hidden" name='us_vip' value="standart">
                    <div class="choosing_btn_group">
                        <input class="submit btn" type='submit' name='pay' value='Оплатить' style="padding: 16px 28px 16px 28px;">
                    </div>
                </form>
                <div class="choosing_back submit">Отмена</div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
.hr {
    border-bottom: solid 2px grey;
    padding-bottom: 2px;
}
.choosing_header {
    font-weight: bold;
    font-size: 24px;
    flex: 0 1;
}
.pers {
    min-height: 48px;
    border-top: solid 1px grey;
    background: #fff;
    align-self: stretch;
    padding: 8px 0;

    display: flex;
    justify-content: space-between;
}
.pers div {
    overflow: hidden;
}
.pers:first-child {
    border: 0;
}
.pers:hover {
    background: #eef;
}
.pers:active {
    background: #fef;
}
.choosing_pers {
    align-self: stretch;
    flex-direction: column;
    justify-content: center;
    overflow-x: hidden;
    overflow-y: auto;
    max-height: 400px;
}
.block__msg {
    height: 24px;
    align-self: stretch;
    text-align: center;
    margin: 16px 0;
}
.choosing_confirm {
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    align-self: stretch;
}
#choosing_form {
    display: flex;
    flex-direction: column;
    justify-content: start;
    align-items: center;
    align-self: stretch;
    min-height: 200px;
}
.submit {
    cursor: pointer;
    transition: all 0.3s ease 0s;
}

.submit:hover {
}
.choosing_btn_group {
    display: flex;
    flex: 1 0;
    align-self: stretch;
    align-items: center;
    flex-direction: column;
    justify-content: start;
}
.choosing_back {
    padding: 8px;
    border-radius: 30px;
    color: grey;
}
.choosing_btn_group input {
    margin: 0;
    height: 56px;
    width: 130px;
    text-align: center;
}


.newtitle {
    display: flex; 
    flex-direction: row; 
    justify-content: space-between; 
    margin-bottom: 60px;
}
@media (max-width: 500px){
    .newtitle {
        flex-direction: column;
    }
    .title-another,
    .title {
        text-align: center;
    }
}
.donate {
    position: relative;
    cursor: pointer;
    color: white;
    text-transform: uppercase;
    border-radius: 50px;
    text-align: center;
    background: linear-gradient(95.6deg, #355CFF 4.88%, #A116E7 93.78%);
    box-shadow: 0px 8px 16px rgba(128, 0, 255, 0.54);
    box-sizing: border-box;
    font-weight: bold;
    font-size: 20px;
    line-height: 24px;
    min-height: 20px;
}
.donate:hover {
    opacity: 0.7;
}
.donate:active {
    opacity: 0.9;
}
</style>


<div class="modal" id="donate_modal">
    <div class="modal__body">
        <div class="modal__content" style="justify-content: start;">
            <span class="modal__close"></span>
            <div class="choosing_header">
                Пополнение баланса
            </div>
            <div class="block__msg hr"></div>
            <form method='POST' action='/subscribe/donate' id="donate_form">
                <input type="text" name="donate" placeholder="Сумма">
                <input class="submit btn" type='submit' name='pay' value='Оплатить' style="padding: 16px 28px 16px 28px;">
            </form>
        </div>
    </div>
</div>

<style>
#donate_form {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    align-self: stretch;
    min-height: 200px;
}
</style>

<div class="modal" id="swap_modal">
    <div class="modal__body">
        <div class="modal__content" style="justify-content: start;">
            <span class="modal__close"></span>
            <div class="choosing_header">
                Перевод внутриигровой валюты
            </div>
            <div class="block__msg hr"></div>
            <p style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
                Ваш текущий баланс: <span class="span_preswap" style="font-family: 'Montserrat'; font-weight: 300; margin-left: 2px;">{{current_user.balance}}</span><img src="{{img}}icon-ruble-backg.svg" style="margin-left: 2px;" alt="ruble">
            </p>
            <p style="white-space: nowrap; text-align:center;">
                Вы переводите: <span class="span_swap" style="font-family: 'Montserrat'; font-weight: 300;"></span><img src="{{img}}icon-ruble-backg.svg" style="display: inline-block; vertical-align: middle; object-fit: cover; object-position: 0 0;" alt="ruble"> <br>
                на счет персонажа <span class="span_nickname" style="font-family: 'Montserrat'; font-weight: 300;"></span>
            </p>
            <form method='POST' action='/subscribe/swap' id="swap_form" style="margin-top: 20px;">
                <input id='swap' type="hidden" name="swap">
                <input id='swap_nickname' type="hidden" name="us_nickname">
                <input class="submit btn" type='submit' name='pay' value='Подтвердить' style="padding: 16px 28px 16px 28px;">
            </form>
        </div>
    </div>
</div>

<style>
#swap_form {
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    align-self: stretch;
}
</style>

<div class="modal" id="del_modal">
    <div class="modal__body">
        <div class="modal__content">
            <span class="modal__close"></span>
            <div class="choosing_header">
                Удаление персонажа
            </div>
            <div class="block__msg hr"></div>
            <p>
                Вы точно хотите удалить <span class="del_pers" style="font-weight: bold; font-style: italic;"></span>?
            </p>
            <input class="submit" type='submit' value='Да' style="padding-top: 8px; padding-bottom: 8px; height: 40px;">
        </div>
    </div>
</div>
{% endblock %}

{% block mainStyles %}
<link rel="stylesheet" href="{{css}}normalize.css">
<link rel="stylesheet" href="{{css}}pr-style.css">
<link rel="stylesheet" href="{{css}}slick.css">
{% endblock %}

{% block mainScripts %}
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" style="width:0;height:0;position:absolute;">
    <defs>
        <linearGradient id="paint0_linear" x1="2.25" y1="-2" x2="24.992" y2="-1.435" gradientUnits="userSpaceOnUse"><stop stop-color="#355CFF"/><stop offset="1" stop-color="#A116E7"/></linearGradient>
    </defs>
</svg>
<script src="{{js}}menuBurger.js"></script>
<script src="{{js}}slick.min.js"></script>
<script src="{{js}}pr-script.js"></script>
<script>
    let maxFileSize = 5000000;
    var data = new FormData();
    function update_slick(){
        try{
        $('.slider').slick('unslick');
        $('.slider').slick({
            mobileFirst: true,
            infinite: false,
            slidesToShow: 1,
            slidesToScroll: 1,


             responsive: [{

              breakpoint: 400,
              settings: {
                infinite: false,
                slidesToShow: 1,
                slidesToScroll: 1,
              }

            }, {

              breakpoint: 767,
              settings: {
                  infinite: false,
                  slidesToShow: 2,
                  slidesToScroll: 2,

                }

            }, {

              breakpoint: 1200,
              settings: {
                  infinite: false,
                  slidesToShow: 3,
                  slidesToScroll: 1,

                }

            }, {

              breakpoint: 1420,
              settings: 'unslick'

             }]

        });
        } catch(e) {}
    }
    $('input[type=file]').on('change', function(event){
        data = new FormData();
        file = this.files[0];
        let file_name = file.name;
        let file_type = file_name.split('.')[file_name.split('.').length - 1];
        if(['gif', 'png', 'jpg', 'jpeg'].indexOf(file_type) === -1 || file.size > maxFileSize)
            return;
        update_user_image(file);
        data.append('file', file);
    });

    function update_user_image(file){
        let reader = new FileReader();

        reader.onload = e => {
            $('.hover-label').attr("src", e.target.result);
        }
        reader.readAsDataURL(file);
    }

    $('.settings-btn').on('click', (e)=>{
        e.preventDefault();
        if(!data.getAll('file').length) return;
        // AJAX запрос
        $.ajax({
            url         : '/uploadAva',
            type        : 'POST',
            data        : data,
            async       : false,
            cache       : false,
            mimeType    : "multipart/form-data",
            processData : false,
            contentType : false,
            success     : function( respond, status, jqXHR ){
                location.reload();
            }
        });
    });

    $('.usr-ava-inner')[0].ondragover = function() {
        $('.usr-ava-inner').addClass('hover-elem');
        return false;
    };

    $('.usr-ava-inner')[0].ondragleave = function() {
        $('.usr-ava-inner').removeClass('hover-elem');
        return false;
    };

    $('.usr-ava-inner')[0].ondrop = function(event) {
        event.preventDefault();
        $('.usr-ava-inner').removeClass('hover-elem');
        $('.usr-ava-inner').addClass('drop-elem');
        var file = event.dataTransfer.files[0];
        let file_name = file.name;
        let file_type = file_name.split('.')[file_name.split('.').length - 1];
        if(['gif', 'png', 'jpg', 'jpeg'].indexOf(file_type) === -1 || file.size > maxFileSize){
            $('.usr-ava-inner').removeClass('drop-elem');
            return;
        }
        data = new FormData();
        update_user_image(file);
        data.append('file', file);
    };
    $('.header__logo').on('click', function(){
	window.location.href = 'https://hydrarp.ru/';	
    });
    //toggle section choose
    $('.user-config').on('click', function(e){
        $('section.sub, section.personages, section.user, section.choose').css({display: 'none'});
        $('section.settings').css({display: 'block'});
        update_slick();
        e.preventDefault();
    });
    $('#return-from-settings-btn').on('click', function(e){
        $('section.sub, section.personages, section.user').css({display: 'block'});
        $('section.user').removeClass('user-mini');
        $('section.settings').css({display: 'none'});
        update_slick();
        e.preventDefault();
    });

    $('#choose-sub-btn').on('click', function(e) {
        $('section.sub, section.personages').css({display: 'none'});
        $('section.choose').css({display: 'block'});
        $('section.user').addClass('user-mini');
        update_slick();
        $('html, body').animate({
            scrollTop: parseInt($('section.choose').offset().top) - 80,
        }, 500);
        e.preventDefault();
    });
    $('#return-from-sub-btn').on('click', function(e) {
        $('section.sub, section.personages').css({display: 'block'});
        $('section.choose').css({display: 'none'});
        $('section.user').removeClass('user-mini');
        update_slick();
        $('html, body').animate({
            scrollTop: parseInt($('section.sub').offset().top) - 80 - 60,
        }, 500);
        e.preventDefault();
    });
    // toggleModals
    // Open the modal
    $('.choose-btn').on('click', function() {
        toggleModal($('#choosing_modal'));
        $('.choosing_pers').css({display: 'flex'});
        $('.choosing_confirm').css({display: 'none'});
    });
    // Close modal
    $('#choosing_modal .modal__close').on('click', function(e) {
        toggleModal($('#choosing_modal'));
    });
    // choose sub 
    $('.choose-btn').on('click', function(e) {
        prices = ['200', '400', '750', '1000']; // fix
        vip = ['standart', 'premium', 'VIP', 'VIP_plus'];
        vipSpecial = ['standart', 'premium', 'VIP', 'VIP+'];
        $('.choosing_value').text(prices[$('.choose-btn').index($(e.target))]);
        $('#input_vip').val(vip[$('.choose-btn').index($(e.target))]);
        $('.span_vip').text(vipSpecial[$('.choose-btn').index($(e.target))]);
        e.preventDefault();
    });
    // Choose pers
    $('.pers').on('click', function(e) {
        $('#input_nickname').val($(e.target).text());
        $('.span_nickname').text($(e.target).text());
        $('.choosing_header').text('Вы готовы?');
        $('.choosing_pers').css({display: 'none'});
        $('.choosing_confirm').css({display: 'flex'});
    });
    $('.choosing_back').on('click', function(e) {
        $('.choosing_header').text('Выберите персонажа');
        $('.choosing_pers').css({display: 'flex'});
        $('.choosing_confirm').css({display: 'none'});
    });
    // toggle Anim
    function toggleAnimation() {
        $('.block__msg').text('');
        $('.block__msg').toggleClass('loading_msg');
    }
    // toggle Donate
    $('.donate').on('click', function(e) {
        toggleModal($('#donate_modal'));
    });
    $('#donate_modal .modal__close').on('click', function(e) {
        toggleModal($('#donate_modal'));
    });
    // swap (calculator)
    $('.balance-input').on('input', function(e) {
	let val = $(this).val().trim().replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
        val = val.replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
	val = val.replace(/^0+/, '');
	if(parseInt(val) > 100000000){
	   val = 100000000;
	}
	$(this).val(val + ' $');
	this.setSelectionRange(val.toString().length, val.toString().length);
        if (val === '' || (parseInt(val) / 100) < 1 || isNaN(val) ) {
            $($('.balance-count').get($('.balance-input').index($(this)))).text('1');
            return;
        }
        try {
            $($('.balance-count').get($('.balance-input').index($(this)))).text((parseInt(val) / 100).toFixed().toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, '$1 '));
        }
        catch (e) {
            $($('.balance-count').get($('.balance-input').index($(this)))).text('1');
        } 
    });
    // swap
    $('.swap').on('click', function(e) {
	let val = $($('.balance-input').get($('.swap').index($(this)))).val().trim().replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
        val = val.replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
	val = val.replace(/[\D]/, '');
	val = val.replace(/^0+/, '');
	val = (parseInt(val) / 100).toFixed().toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, '$1 ');
	if(isNaN(parseInt(val))){
	   return;
	}
        $('.span_swap').text(val);
        $('input#swap').val(val);
        $('.span_nickname').text($($('.pers-nickname').get($('.swap').index($(this)))).val());
        $('input#swap_nickname').val($($('.pers-nickname').get($('.swap').index($(this)))).val());
        if (parseInt($('.span_swap').text()) > parseInt($('.span_preswap').text())) {
            $('#swap_form').addClass('blocked-btn');
        }
        if ($('input#swap').val().trim() !== '')
            toggleModal($('#swap_modal'));
        e.preventDefault();
    });
    $('#swap_modal .modal__close').on('click', function(e) {
        $('#swap_form').removeClass('blocked-btn');
        toggleModal($('#swap_modal'));
    });
    // delete pers
    $('.person-delete').on('click', function(e) {
        $('.del_pers').text($($('.pers-nickname').get($('.person-delete').index($(this)))).val());
        toggleModal($('#del_modal'));
        e.preventDefault();
    });
    $('#del_modal .modal__close').on('click', function() {
        toggleModal($('#del_modal'));
    });
    $('#del_modal input').on('click', function(e) {
        toggleAnimation();
        $.ajax({
            url:        '/delete_pers',
            type:       'POST',
            data:       'nickname=' + $('.del_pers').text(),
            success:    function(response) {
                // waiting animation
                toggleAnimation();
                // process
                var result = JSON.parse(response);

                if (result['state'] === 'success') {
                    // reload page
                    //window.location.href=window.location.href;
                    window.location.reload(true);
                    $('.block__msg').css({color:'lightgreen'});
                } else {
                    $('.block__msg').css({color:'red'});
                    // echo error ($ = res[msg] look down the code)
                }
                $('.block__msg').text(result['msg']);
            },
            error:      function(response, exception) {
                toggleAnimation();
                customAlertFunc(0, "Простите, возникла ошибка на стороне сервера. Попробуйте еще раз.");
            },
        });
    });
</script>
{% endblock %}